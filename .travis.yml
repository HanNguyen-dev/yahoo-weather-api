language: java

os: linux
dist: bionic
jdk:
  - oraclejdk11

jobs:
  include:
      - stage: compile
        script:
          - cd yahoo-weather-service
          - gradle clean build
      - stage: test
        script:
          - cd yahoo-weather-service
          - gradle test

      - stage: deploy to staging
        script:
          - cd yahoo-weather-service
        deploy: &heroku
          provider: heroku
          app: sf-stages-staging
          api_key: $HEROKU_AUTH_TOKEN
